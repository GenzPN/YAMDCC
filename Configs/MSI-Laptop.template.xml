<?xml version="1.0" encoding="utf-8"?>
<FanControlConfig xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="1">
    <!--
        This is a template config with most correct EC registers for MSI laptops.
        The only registers that might need changing are the fan RPM registers
        and the register configs at the end.
        You can use this to manually fill in temperature thresholds with e.g. ec-probe from NBFC,
        or using MSI Fan Control's default fan profile finder (when it actually gets implemented)
    -->
    <Model>MSI Laptop Template</Model>
    <Author>Sparronator9999</Author>
    <FanConfigs>
        <FanConfig>
        <Name>CPU Fan</Name>
        <MinSpeed>0</MinSpeed>
        <MaxSpeed>100</MaxSpeed>
        <CurveSel>1</CurveSel>
        <SpeedReadReg>113</SpeedReadReg>
        <TempReadReg>104</TempReadReg>
        <RPMConfig>
            <ReadReg>200</ReadReg>
            <Is16Bit>true</Is16Bit>
            <IsBigEndian>true</IsBigEndian>
            <Multiplier>478000</Multiplier>
            <DivideByMult>true</DivideByMult>
            <Invert>true</Invert>
        </RPMConfig>
        <UpThresholdRegs>
            <unsignedByte>106</unsignedByte>
            <unsignedByte>107</unsignedByte>
            <unsignedByte>108</unsignedByte>
            <unsignedByte>109</unsignedByte>
            <unsignedByte>110</unsignedByte>
            <unsignedByte>111</unsignedByte>
        </UpThresholdRegs>
        <DownThresholdRegs>
            <unsignedByte>122</unsignedByte>
            <unsignedByte>123</unsignedByte>
            <unsignedByte>124</unsignedByte>
            <unsignedByte>125</unsignedByte>
            <unsignedByte>126</unsignedByte>
            <unsignedByte>127</unsignedByte>
        </DownThresholdRegs>
        <FanCurveRegs>
            <unsignedByte>114</unsignedByte>
            <unsignedByte>115</unsignedByte>
            <unsignedByte>116</unsignedByte>
            <unsignedByte>117</unsignedByte>
            <unsignedByte>118</unsignedByte>
            <unsignedByte>119</unsignedByte>
            <unsignedByte>120</unsignedByte>
        </FanCurveRegs>
        <FanCurveConfigs>
                <Name>Default</Name>
                <Description>The manufacturer default CPU fan curve.</Description>
                <TempThresholds>
                    <TempThreshold>
                        <UpThreshold>0</UpThreshold>
                        <DownThreshold>0</DownThreshold>
                        <FanSpeed>38</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>55</UpThreshold>
                        <DownThreshold>47</DownThreshold>
                        <FanSpeed>43</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>64</UpThreshold>
                        <DownThreshold>61</DownThreshold>
                        <FanSpeed>48</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>73</UpThreshold>
                        <DownThreshold>70</DownThreshold>
                        <FanSpeed>54</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>76</UpThreshold>
                        <DownThreshold>73</DownThreshold>
                        <FanSpeed>60</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>82</UpThreshold>
                        <DownThreshold>79</DownThreshold>
                        <FanSpeed>70</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>88</UpThreshold>
                        <DownThreshold>85</DownThreshold>
                        <FanSpeed>85</FanSpeed>
                    </TempThreshold>
                </TempThresholds>
            </FanCurveConfig>
        </FanCurveConfigs>
    </FanConfig>
    <FanConfig>
        <Name>GPU Fan</Name>
        <MinSpeed>0</MinSpeed>
        <MaxSpeed>100</MaxSpeed>
        <CurveSel>1</CurveSel>
        <SpeedReadReg>137</SpeedReadReg>
        <TempReadReg>128</TempReadReg>
        <RPMConfig>
            <ReadReg>200</ReadReg>
            <Is16Bit>true</Is16Bit>
            <IsBigEndian>true</IsBigEndian>
            <Multiplier>478000</Multiplier>
            <DivideByMult>true</DivideByMult>
            <Invert>true</Invert>
        </RPMConfig>
        <UpThresholdRegs>
            <unsignedByte>130</unsignedByte>
            <unsignedByte>131</unsignedByte>
            <unsignedByte>132</unsignedByte>
            <unsignedByte>133</unsignedByte>
            <unsignedByte>134</unsignedByte>
            <unsignedByte>135</unsignedByte>
        </UpThresholdRegs>
        <DownThresholdRegs>
            <unsignedByte>146</unsignedByte>
            <unsignedByte>147</unsignedByte>
            <unsignedByte>148</unsignedByte>
            <unsignedByte>149</unsignedByte>
            <unsignedByte>150</unsignedByte>
            <unsignedByte>151</unsignedByte>
        </DownThresholdRegs>
        <FanCurveRegs>
            <unsignedByte>138</unsignedByte>
            <unsignedByte>139</unsignedByte>
            <unsignedByte>140</unsignedByte>
            <unsignedByte>141</unsignedByte>
            <unsignedByte>142</unsignedByte>
            <unsignedByte>143</unsignedByte>
            <unsignedByte>144</unsignedByte>
        </FanCurveRegs>
        <FanCurveConfigs>
            <FanCurveConfig>
                <Name>Default</Name>
                <Description>The manufacturer default GPU fan curve.</Description>
                <TempThresholds>
                    <TempThreshold>
                        <UpThreshold>0</UpThreshold>
                        <DownThreshold>0</DownThreshold>
                        <FanSpeed>38</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>55</UpThreshold>
                        <DownThreshold>47</DownThreshold>
                        <FanSpeed>43</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>61</UpThreshold>
                        <DownThreshold>58</DownThreshold>
                        <FanSpeed>48</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>67</UpThreshold>
                        <DownThreshold>64</DownThreshold>
                        <FanSpeed>54</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>73</UpThreshold>
                        <DownThreshold>70</DownThreshold>
                        <FanSpeed>60</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>79</UpThreshold>
                        <DownThreshold>76</DownThreshold>
                        <FanSpeed>70</FanSpeed>
                    </TempThreshold>
                    <TempThreshold>
                        <UpThreshold>85</UpThreshold>
                        <DownThreshold>82</DownThreshold>
                        <FanSpeed>85</FanSpeed>
                    </TempThreshold>
                </TempThresholds>
            </FanCurveConfig>
        </FanConfig>
    </FanConfigs>
    <FullBlastConfig>
        <Register>152</Register>
        <OnValue>134</OnValue>
        <OffValue>6</OffValue>
    </FullBlastConfig>
    <ChargeLimitConfig>
        <Register>215</Register>
        <MinValue>128</MinValue>
        <MaxValue>228</MaxValue>
        <Value>60</Value>
    </ChargeLimitConfig>
    <RegConfigs>
        <!-- 10th-gen and older laptops need a different register here, but otherwise use the same (or very similar) value here -->
        <RegConfig>
            <Description>Set fan mode to Advanced. Fixes fans not working at all with certain fan settings.</Description>
            <Register>212</Register>
            <Value>77</Value>
        </RegConfig>

        <!-- Try removing this if it doesn't work on your computer -->
        <RegConfig>
            <Description>Set Performance Level to Turbo. Fixes fan speeds capped at ~60%, even when configs set the fan to run faster. Effects on actual system performance are unknown.</Description>
            <Register>210</Register>
            <Value>196</Value>
        </RegConfig>
    </RegConfigs>
</FanControlConfig>
